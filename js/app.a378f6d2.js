(function(e){function a(a){for(var t,i,s=a[0],l=a[1],c=a[2],y=0,p=[];y<s.length;y++)i=s[y],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);d&&d(a);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,a=0;a<o.length;a++){for(var r=o[a],t=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(t=!1)}t&&(o.splice(a--,1),e=i(i.s=r[0]))}return e}var t={},n={app:0},o=[];function i(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,a,r){i.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,a){if(1&a&&(e=i(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var t in e)i.d(r,t,function(a){return e[a]}.bind(null,t));return r},i.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(a,"a",a),a},i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},i.p="/ExpLoader/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=a,s=s.slice();for(var c=0;c<s.length;c++)a(s[c]);var d=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,a,r){e.exports=r("56d7")},"034f":function(e,a,r){"use strict";r("85ec")},"56d7":function(e,a,r){"use strict";r.r(a);r("e260"),r("e6cf"),r("cca6"),r("a79d");var t=r("2b0e"),n=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("v-app",[r("v-main",[r("v-container",{staticClass:"full-height pa-0"},[r("v-row",{staticClass:"fill-height"},[r("v-col",{attrs:{cols:"2"}},[r("v-file-input",{attrs:{label:"File input"},on:{change:e.onSelectFileChange}})],1),r("v-col",{staticClass:"fill-height",attrs:{cols:"8"}},[r("v-btn-toggle",{attrs:{tile:"",color:"indigo accent-3",group:""},model:{value:e.currentView,callback:function(a){e.currentView=a},expression:"currentView"}},e._l(e.views,(function(a){return r("v-btn",{key:a.display},[e._v(" "+e._s(a.display)+" ")])})),1)],1),r("v-col",{attrs:{cols:"2"}},[r("v-select",{attrs:{items:e.spectras,"item-text":"name",label:"Select Spectra","persistent-hint":"","return-object":"","single-line":""},on:{change:function(a){return e.onSelectSpectra(a)}},model:{value:e.currentSpectra,callback:function(a){e.currentSpectra=a},expression:"currentSpectra"}})],1),r("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[r("plotly",e._b({staticClass:"graph",attrs:{data:e.views[e.currentView].data.data,layout:e.views[e.currentView].data.layout},on:{selected:e.onPlotlySelectPoints,click:e.onPlotlyClick}},"plotly",e.views[e.currentView].data.data,!1))],1)],1)],1)],1)],1)},o=[],i=(r("a630"),r("d81d"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("2909")),s=[{z:[],type:"heatmap",coloraxis:"coloraxis",name:"chn 0",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x2",yaxis:"y2",coloraxis:"coloraxis",name:"chn 1",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x3",yaxis:"y3",coloraxis:"coloraxis",name:"chn 2",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x4",yaxis:"y4",coloraxis:"coloraxis",name:"chn 3",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x5",yaxis:"y5",coloraxis:"coloraxis",name:"chn 4",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x6",yaxis:"y6",coloraxis:"coloraxis",name:"chn 5",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x7",yaxis:"y7",coloraxis:"coloraxis",name:"chn 6",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1},{z:[],type:"heatmap",xaxis:"x8",yaxis:"y8",coloraxis:"coloraxis",name:"chn 7",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{z}<extra>%{fullData.name}</extra>",showlegend:!1}],l={clickmode:"event",title:"2D Spectra of Each Detector",paper_bgcolor:"#eee",margin:{l:50,r:50,b:50,t:50},grid:{rows:2,columns:4,pattern:"independent",roworder:"top to bottom"},xaxis:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis2:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis2:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis3:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis3:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis4:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis4:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis5:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis5:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis6:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis6:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis7:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis7:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},xaxis8:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},yaxis8:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,mirror:!0,tickmode:"array",tickvals:[0,128,256]},coloraxis:{cmin:0,cmax:150,colorscale:"Greys",reversescale:!0,colorbar:{thickness:15}}},c={display:"2D Spectras",data:{layout:l,data:s,attr:{displayModeBar:!0,responsive:!0}}},d={title:"1D Spectra of Each Detector",spikedistance:200,hoverdistance:10,paper_bgcolor:"#eee",margin:{l:50,r:50,b:50,t:50},xaxis:{range:[0,1024],tickmode:"array",tickvals:[0,256,512,768,1024],rangemode:"nonnegative",showline:!0,showspikes:!0,spikemode:"across",spikedash:"solid",spikecolor:"#000000",spikethickness:2},yaxis:{rangemode:"nonnegative",autorange:!0,showline:!0}},y={display:"1D Spectras",data:{layout:d,data:[],attr:{displayModeBar:!0,responsive:!0}}},p=[{z:[],type:"surface",colorscale:"Greys",reversescale:!0,colorbar:{thickness:15}}],x={title:"3D Spectra",paper_bgcolor:"#eee",margin:{l:50,r:50,b:50,t:50},scene:{camera:{up:{x:0,y:0,z:1},center:{x:0,y:0,z:0},eye:{x:1.25,y:1.25,z:1.25}},xaxis:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,tickmode:"array",tickvals:[0,128,256]},yaxis:{range:[0,256],rangemode:"nonnegative",zeroline:!0,showline:!0,tickmode:"array",tickvals:[0,128,256]}}},m={display:"3D Surface",data:{layout:x,data:p,attr:{displayModeBar:!0,responsive:!0}}},h={marker:{cmin:0,color:[],colorscale:"Greys",reversescale:!0,showscale:!0,size:2,colorbar:{thickness:15}},mode:"markers",showlegend:!1,type:"scattergl",unselected:{marker:{opacity:1}},x:[],xaxis:"x",y:[],yaxis:"y",hovertemplate:"x = %{x}<br>y = %{y}<br>z = %{marker.color}<extra></extra>"},u={showlegend:!1,type:"scattergl",x:[],xaxis:"x2",y:[],yaxis:"y2",hovertemplate:"x = %{x}<br>y = %{y}<extra></extra>"},g={showlegend:!1,type:"scattergl",x:[],xaxis:"x3",y:[],yaxis:"y3",hovertemplate:"x = %{x}<br>y = %{y}<extra></extra>"},v={paper_bgcolor:"#eee",margin:{l:50,r:50,b:50,t:50},clickmode:"event+select",annotations:[{font:{size:16},showarrow:!1,text:"2D Spectra",x:.3,xanchor:"center",xref:"paper",y:1,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"E axes (Max)",x:.75,xanchor:"center",xref:"paper",y:1,yanchor:"bottom",yref:"paper"},{font:{size:16},showarrow:!1,text:"dE axes (Max)",x:.75,xanchor:"center",xref:"paper",y:.45,yanchor:"bottom",yref:"paper"}],xaxis:{anchor:"y",domain:[0,.54],range:[0,256],tickmode:"array",tickvals:[0,128,256],rangemode:"nonnegative",zeroline:!0,title:{text:"Energy of E detector (Channel no.)"}},xaxis2:{anchor:"y2",domain:[.64,1],range:[0,256],tickmode:"array",tickvals:[0,128,256],rangemode:"nonnegative",zeroline:!0,showspikes:!0,spikemode:"across",spikesnap:"cursor",spikethickness:1,showline:!0},xaxis3:{anchor:"y3",domain:[.64,1],range:[0,256],tickmode:"array",tickvals:[0,128,256],rangemode:"nonnegative",zeroline:!0,title:{text:"Binding energy (eV)"},showspikes:!0,spikemode:"across",spikesnap:"cursor",spikethickness:1,showline:!0},yaxis:{anchor:"x",domain:[0,1],range:[0,256],tickmode:"array",tickvals:[0,128,256],zeroline:!0,title:{text:"Energy of dE detector (Channel no.)"},rangemode:"nonnegative"},yaxis2:{anchor:"x2",domain:[.6,1],zeroline:!0,title:{text:"Intensity (a.u.)"},rangemode:"nonnegative",autorange:!0},yaxis3:{anchor:"x3",domain:[0,.45],title:{text:"Intensity (a.u.)"},rangemode:"nonnegative",zeroline:!0,autorange:!0}},f={display:"Interactive",data:{layout:v,data:[h,u,g],attr:{displayModeBar:!0,responsive:!0}}},k=(r("a4d3"),r("e01a"),r("a9e3"),r("5cc6"),r("84c3"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("d4ec")),b=r("bee2"),w=function(){function e(a){Object(k["a"])(this,e),this.description=(new TextDecoder).decode(new Uint8Array(a,0,512)),this.data1d=Array.from({length:16}).map((function(e,r){return new Uint16Array(a,1024+1024*r*2,1024)}));var r=33792;this.data2d=Array.from({length:8}).map((function(e,t){return Array.from({length:256}).map((function(e,n){return new Uint16Array(a,r+256*t*256*2+256*n*2,256)}))}))}return Object(b["a"])(e,[{key:"get2DPoints",value:function(e){var a,r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,o={color:[],x:[],y:[]},i=this.data2d[e];for(a=0;a<256;a++)for(r=0;r<256;++r)i[a][r]>t&&i[a][r]<n&&(o.color.push(i[a][r]),o.y.push(a),o.x.push(r));return o}}]),e}(),z=w,S={name:"App",data:function(){return{views:[c,y,f,m],currentView:0,spectras:[{id:0,name:"Channel 0"},{id:1,name:"Channel 1"},{id:2,name:"Channel 2"},{id:3,name:"Channel 3"},{id:4,name:"Channel 4"},{id:5,name:"Channel 5"},{id:6,name:"Channel 6"},{id:7,name:"Channel 7"}],currentSpectra:void 0,currentFile:void 0,dataArray:void 0}},created:function(){this.currentSpectra=this.spectras[0],this.currentView=0},methods:{onSelectFileChange:function(e){if(e)if(1082368!=e.size)alert('Corrupted file (size="'.concat(e.size,'")'));else{this.currentFile=e,console.log(e);var a=new FileReader;a.readAsArrayBuffer(e);var r=this;a.onload=function(){r.dataArray=new z(a.result);for(var e=0;e<8;e++)c.data.data[e].z=r.dataArray.data2d[e];y.data.data=r.dataArray.data1d.map((function(e){return{type:"scatter",y:e}}));var t=r.dataArray.get2DPoints(r.currentSpectra.id,0);f.data.data[0]["marker"]["color"]=t.color,f.data.data[0].x=t.x,f.data.data[0].y=t.y;var n,o,s,l=Object(i["a"])(Array(256).keys()),d=r.dataArray.data2d[r.currentSpectra.id];for(f.data.data[1].x=l,f.data.data[1].y=[],e=0;e<256;e++)f.data.data[1].y.push(Math.max.apply(null,d[e]));for(f.data.data[2].x=l,f.data.data[2].y=[],n=0;n<256;n++){for(o=n,s=0,e=1;e<256;++e)d[e][n]>d[s][o]&&(s=e);f.data.data[2].y.push(d[s][o])}m.data.data[0].z=r.dataArray.data2d[r.currentSpectra.id]},a.onerror=function(){console.error(a.error)}}else{for(var t=0;t<8;t++)c.data.data[t].z=[];y.data.data=[];for(var n=0;n<3;n++)f.data.data[n]["marker"]["color"]=[],f.data.data[n].x=[],f.data.data[n].y=[];m.data.data[0].z=[]}},onSelectSpectra:function(e){console.log("onSelectSpectra",e.id,e.name);var a=this.dataArray?this.dataArray.get2DPoints(this.currentSpectra.id,0):{color:[],x:[],y:[]};f.data.data[0]["marker"]["color"]=a.color,f.data.data[0].x=a.x,f.data.data[0].y=a.y;var r=Object(i["a"])(Array(256).keys());if(this.dataArray){var t,n,o,s,l=this.dataArray.data2d[this.currentSpectra.id];for(f.data.data[1].x=r,f.data.data[1].y=[],t=0;t<256;t++)f.data.data[1].y.push(Math.max.apply(null,l[t]));for(f.data.data[2].x=r,f.data.data[2].y=[],n=0;n<256;n++){for(o=n,s=0,t=1;t<256;++t)l[t][n]>l[s][o]&&(s=t);f.data.data[2].y.push(l[s][o])}}else f.data.data[1].x=r,f.data.data[1].y=[],f.data.data[2].x=r,f.data.data[2].y=[];m.data.data[0].z=this.dataArray?this.dataArray.data2d[this.currentSpectra.id]:[]},onPlotlySelectPoints:function(e,a){console.log("onPlotlySelectPoints",e,a);var r,t=Object(i["a"])(Array(256).keys()),n=Array.from(Array(256),(function(){return 0})),o=Array.from(Array(256),(function(){return 0}));for(r=0;r<e.points.length;r++)n[e.points[r].x]=Math.max(n[e.points[r].x],e.points[r]["marker.color"]),o[e.points[r].y]=Math.max(n[e.points[r].y],e.points[r]["marker.color"]);f.data.data[1].x=t,f.data.data[1].y=n,f.data.data[2].x=t,f.data.data[2].y=o},onPlotlyClick:function(e){0===this.currentView?(console.log("onPlotlyClick",e.points[0].curveNumber),this.currentView=2,this.currentSpectra=this.spectras[e.points[0].curveNumber],this.onSelectSpectra(this.currentSpectra)):console.log("Skip click handling")}}},A=S,C=(r("034f"),r("2877")),D=r("6544"),V=r.n(D),P=r("7496"),O=r("8336"),_=r("a609"),j=r("62ad"),M=r("a523"),E=r("23a7"),B=r("f6c4"),F=r("0fd9"),T=r("b974"),I=Object(C["a"])(A,n,o,!1,null,null,null),U=I.exports;V()(I,{VApp:P["a"],VBtn:O["a"],VBtnToggle:_["a"],VCol:j["a"],VContainer:M["a"],VFileInput:E["a"],VMain:B["a"],VRow:F["a"],VSelect:T["a"]});var G=r("f309");t["a"].use(G["a"]);var N=new G["a"]({}),J=r("04d1");t["a"].component("plotly",J["Plotly"]),t["a"].config.productionTip=!1,new t["a"]({vuetify:N,render:function(e){return e(U)}}).$mount("#app")},"85ec":function(e,a,r){}});
//# sourceMappingURL=app.a378f6d2.js.map